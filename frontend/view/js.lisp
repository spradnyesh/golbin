(in-package :hawksbill.golbin.frontend)

(defun on-load ()
  (import-macros-from-lisp '$$)
  (ps ($$ (document ready)
        (let ((subnav nil)))
        (flet ((display-subcategory ()
                 (setf subnav ((@ ($ "#subnav") children)))
                 ((@ ($ "#subnav") empty))
                 ((@ ($ "#subnav") append) ((@ ((@ ($ this) children) "ul") children)))
                 nil)
               (hide-subcategory ()
                 ((@ ((@ ($ this) children) "ul") append) ((@ ($ "#subnav") children)))
                 ((@ ($ "#subnav") append) subnav)
                 nil)))
        ((@ ($ "#nav .cat") hover) display-subcategory hide-subcategory)
        nil)))
